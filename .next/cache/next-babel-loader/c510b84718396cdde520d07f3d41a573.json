{"ast":null,"code":"import connectDb from \"../../utils/connectDb\";\nimport axios from \"axios\";\nimport Plcaeinfo from '../../models/Placeinfo';\nconnectDb();\nexport default (async (req, res) => {\n  let {\n    location,\n    interest\n  } = req.body;\n  let recomendedplaces;\n  interest = \"relaxation\";\n  location = \"ss world park\"; // console.log(location);\n  // console.log(interest);\n\n  try {\n    const url = `http://localhost:5000/recommand`;\n    const payload = {\n      location,\n      interest\n    };\n    const response = await axios.post(url, payload);\n    recomendedplaces = response.data.places;\n  } catch (error) {\n    console.error(error);\n    res.status(500).send(\"Error . Please try again later\");\n  } // console.log(recomendedplaces);\n\n\n  const places = [];\n\n  for (var x = 0; x < recomendedplaces.length; x++) {\n    places.push(recomendedplaces[x].split(\",\")[0]);\n  }\n\n  const placesdata = [];\n\n  try {\n    for (var x = 0; x < places.length; x++) {\n      const data = await Plcaeinfo.find();\n      placesdata.push(data);\n    }\n\n    console.log(placesdata);\n    res.status(201).json(placesdata);\n  } catch (error) {\n    console.error(error);\n    res.status(500).send(\"Error . Please try again later\");\n  }\n});","map":{"version":3,"sources":["C:/Users/Samee/Desktop/Portfolio/react-reserve-master/pages/api/recomend.js"],"names":["connectDb","axios","Plcaeinfo","req","res","location","interest","body","recomendedplaces","url","payload","response","post","data","places","error","console","status","send","x","length","push","split","placesdata","find","log","json"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAuB,wBAAvB;AAEAF,SAAS;AAET,gBAAe,OAAOG,GAAP,EAAYC,GAAZ,KAAoB;AAE/B,MAAI;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAAyBH,GAAG,CAACI,IAAjC;AACA,MAAIC,gBAAJ;AAEAF,EAAAA,QAAQ,GAAG,YAAX;AACAD,EAAAA,QAAQ,GAAG,eAAX,CAN+B,CAQ/B;AACA;;AAGA,MAAI;AACA,UAAMI,GAAG,GAAI,iCAAb;AACA,UAAMC,OAAO,GAAG;AAAEL,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAhB;AACA,UAAMK,QAAQ,GAAG,MAAMV,KAAK,CAACW,IAAN,CAAWH,GAAX,EAAgBC,OAAhB,CAAvB;AACAF,IAAAA,gBAAgB,GAAGG,QAAQ,CAACE,IAAT,CAAcC,MAAjC;AACH,GALD,CAKE,OAAOC,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAX,IAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gCAArB;AACH,GApB8B,CAqB/B;;;AACA,QAAMJ,MAAM,GAAG,EAAf;;AACA,OAAI,IAAIK,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGX,gBAAgB,CAACY,MAApC,EAA4CD,CAAC,EAA7C,EAAgD;AAC5CL,IAAAA,MAAM,CAACO,IAAP,CAAYb,gBAAgB,CAACW,CAAD,CAAhB,CAAoBG,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAZ;AACH;;AAED,QAAMC,UAAU,GAAG,EAAnB;;AAEA,MAAI;AAEA,SAAI,IAAIJ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGL,MAAM,CAACM,MAA1B,EAAkCD,CAAC,EAAnC,EAAsC;AAClC,YAAMN,IAAI,GAAG,MAAMX,SAAS,CAACsB,IAAV,EAAnB;AACAD,MAAAA,UAAU,CAACF,IAAX,CAAgBR,IAAhB;AACH;;AACDG,IAAAA,OAAO,CAACS,GAAR,CAAYF,UAAZ;AACAnB,IAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBS,IAAhB,CAAqBH,UAArB;AACD,GARH,CAQI,OAAOR,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAX,IAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gCAArB;AACD;AAGN,CA3CD","sourcesContent":["import connectDb from \"../../utils/connectDb\";\r\nimport axios from \"axios\";\r\nimport Plcaeinfo from  '../../models/Placeinfo';\r\n\r\nconnectDb();\r\n\r\nexport default async (req, res) => {\r\n\r\n    let { location, interest } = req.body;\r\n    let recomendedplaces;\r\n\r\n    interest = \"relaxation\";\r\n    location = \"ss world park\";\r\n\r\n    // console.log(location);\r\n    // console.log(interest);\r\n\r\n\r\n    try {\r\n        const url = `http://localhost:5000/recommand`;\r\n        const payload = { location, interest };\r\n        const response = await axios.post(url, payload);\r\n        recomendedplaces = response.data.places;\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.status(500).send(\"Error . Please try again later\");\r\n    }\r\n    // console.log(recomendedplaces);\r\n    const places = [];\r\n    for(var x = 0; x < recomendedplaces.length; x++){\r\n        places.push(recomendedplaces[x].split(\",\")[0]);\r\n    }\r\n\r\n    const placesdata = [];\r\n\r\n    try {\r\n\r\n        for(var x = 0; x < places.length; x++){\r\n            const data = await Plcaeinfo.find();\r\n            placesdata.push(data);\r\n        }\r\n        console.log(placesdata);\r\n        res.status(201).json(placesdata);\r\n      } catch (error) {\r\n        console.error(error);\r\n        res.status(500).send(\"Error . Please try again later\");\r\n      }\r\n\r\n\r\n};\r\n"]},"metadata":{},"sourceType":"module"}