{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport connectDb from \"../../utils/connectDb\";\nimport axios from \"axios\";\nimport Plcaeinfo from '../../models/Placeinfo';\nconnectDb();\nexport default /*#__PURE__*/(function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n    var _req$body, location, interest, recomendedplaces, url, payload, response, places, x, placesdata, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _req$body = req.body, location = _req$body.location, interest = _req$body.interest;\n            interest = \"relaxation\";\n            location = \"ss world park\"; // console.log(location);\n            // console.log(interest);\n\n            _context.prev = 3;\n            url = \"http://localhost:5000/recommand\";\n            payload = {\n              location: location,\n              interest: interest\n            };\n            _context.next = 8;\n            return axios.post(url, payload);\n\n          case 8:\n            response = _context.sent;\n            recomendedplaces = response.data.places;\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](3);\n            console.error(_context.t0);\n            res.status(500).send(\"Error . Please try again later\");\n\n          case 16:\n            // console.log(recomendedplaces);\n            places = [];\n\n            for (x = 0; x < recomendedplaces.length; x++) {\n              places.push(recomendedplaces[x].split(\",\")[0]);\n            }\n\n            placesdata = [];\n            _context.prev = 19;\n            x = 0;\n\n          case 21:\n            if (!(x < places.length)) {\n              _context.next = 29;\n              break;\n            }\n\n            _context.next = 24;\n            return Plcaeinfo.find();\n\n          case 24:\n            data = _context.sent;\n            placesdata.push(data);\n\n          case 26:\n            x++;\n            _context.next = 21;\n            break;\n\n          case 29:\n            console.log(placesdata);\n            res.status(201).json(placesdata);\n            _context.next = 37;\n            break;\n\n          case 33:\n            _context.prev = 33;\n            _context.t1 = _context[\"catch\"](19);\n            console.error(_context.t1);\n            res.status(500).send(\"Error . Please try again later\");\n\n          case 37:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 12], [19, 33]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();","map":{"version":3,"sources":["C:/Users/Samee/Desktop/Portfolio/react-reserve-master/pages/api/recomend.js"],"names":["connectDb","axios","Plcaeinfo","req","res","body","location","interest","url","payload","post","response","recomendedplaces","data","places","console","error","status","send","x","length","push","split","placesdata","find","log","json"],"mappings":";;AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAuB,wBAAvB;AAEAF,SAAS;AAET;AAAA,sEAAe,iBAAOG,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEkBD,GAAG,CAACE,IAFtB,EAELC,QAFK,aAELA,QAFK,EAEKC,QAFL,aAEKA,QAFL;AAKXA,YAAAA,QAAQ,GAAG,YAAX;AACAD,YAAAA,QAAQ,GAAG,eAAX,CANW,CAQX;AACA;;AATW;AAaDE,YAAAA,GAbC;AAcDC,YAAAA,OAdC,GAcS;AAAEH,cAAAA,QAAQ,EAARA,QAAF;AAAYC,cAAAA,QAAQ,EAARA;AAAZ,aAdT;AAAA;AAAA,mBAegBN,KAAK,CAACS,IAAN,CAAWF,GAAX,EAAgBC,OAAhB,CAfhB;;AAAA;AAeDE,YAAAA,QAfC;AAgBPC,YAAAA,gBAAgB,GAAGD,QAAQ,CAACE,IAAT,CAAcC,MAAjC;AAhBO;AAAA;;AAAA;AAAA;AAAA;AAkBPC,YAAAA,OAAO,CAACC,KAAR;AACAZ,YAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gCAArB;;AAnBO;AAqBX;AACMJ,YAAAA,MAtBK,GAsBI,EAtBJ;;AAuBX,iBAAQK,CAAR,GAAY,CAAZ,EAAeA,CAAC,GAAGP,gBAAgB,CAACQ,MAApC,EAA4CD,CAAC,EAA7C,EAAgD;AAC5CL,cAAAA,MAAM,CAACO,IAAP,CAAYT,gBAAgB,CAACO,CAAD,CAAhB,CAAoBG,KAApB,CAA0B,GAA1B,EAA+B,CAA/B,CAAZ;AACH;;AAEKC,YAAAA,UA3BK,GA2BQ,EA3BR;AAAA;AA+BCJ,YAAAA,CA/BD,GA+BK,CA/BL;;AAAA;AAAA,kBA+BQA,CAAC,GAAGL,MAAM,CAACM,MA/BnB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAgCgBlB,SAAS,CAACsB,IAAV,EAhChB;;AAAA;AAgCGX,YAAAA,IAhCH;AAiCHU,YAAAA,UAAU,CAACF,IAAX,CAAgBR,IAAhB;;AAjCG;AA+B2BM,YAAAA,CAAC,EA/B5B;AAAA;AAAA;;AAAA;AAmCPJ,YAAAA,OAAO,CAACU,GAAR,CAAYF,UAAZ;AACAnB,YAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBS,IAAhB,CAAqBH,UAArB;AApCO;AAAA;;AAAA;AAAA;AAAA;AAsCPR,YAAAA,OAAO,CAACC,KAAR;AACAZ,YAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gCAArB;;AAvCO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAf;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import connectDb from \"../../utils/connectDb\";\r\nimport axios from \"axios\";\r\nimport Plcaeinfo from  '../../models/Placeinfo';\r\n\r\nconnectDb();\r\n\r\nexport default async (req, res) => {\r\n\r\n    let { location, interest } = req.body;\r\n    let recomendedplaces;\r\n\r\n    interest = \"relaxation\";\r\n    location = \"ss world park\";\r\n\r\n    // console.log(location);\r\n    // console.log(interest);\r\n\r\n\r\n    try {\r\n        const url = `http://localhost:5000/recommand`;\r\n        const payload = { location, interest };\r\n        const response = await axios.post(url, payload);\r\n        recomendedplaces = response.data.places;\r\n    } catch (error) {\r\n        console.error(error);\r\n        res.status(500).send(\"Error . Please try again later\");\r\n    }\r\n    // console.log(recomendedplaces);\r\n    const places = [];\r\n    for(var x = 0; x < recomendedplaces.length; x++){\r\n        places.push(recomendedplaces[x].split(\",\")[0]);\r\n    }\r\n\r\n    const placesdata = [];\r\n\r\n    try {\r\n\r\n        for(var x = 0; x < places.length; x++){\r\n            const data = await Plcaeinfo.find();\r\n            placesdata.push(data);\r\n        }\r\n        console.log(placesdata);\r\n        res.status(201).json(placesdata);\r\n      } catch (error) {\r\n        console.error(error);\r\n        res.status(500).send(\"Error . Please try again later\");\r\n      }\r\n\r\n\r\n};\r\n"]},"metadata":{},"sourceType":"module"}